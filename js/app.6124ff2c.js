(function(e){function t(t){for(var n,o,l=t[0],a=t[1],u=t[2],d=0,p=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);s&&s(t);while(p.length)p.shift()();return c.push.apply(c,u||[]),i()}function i(){for(var e,t=0;t<c.length;t++){for(var i=c[t],n=!0,l=1;l<i.length;l++){var a=i[l];0!==r[a]&&(n=!1)}n&&(c.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},r={app:0},c=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var s=a;c.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"15c7":function(e,t,i){e.exports=i.p+"img/dressing_sald.cc9a9f2a.png"},1655:function(e,t,i){},2427:function(e,t,i){"use strict";i("ae90")},2541:function(e,t,i){e.exports=i.p+"img/salad.f8dce597.png"},"2cee":function(e,t,i){e.exports=i.p+"img/cooking_yakiniku_tare.263e7575.png"},"370e":function(e,t,i){"use strict";i("1655")},"57da":function(e,t,i){"use strict";i("f233")},"6bbe":function(e,t,i){e.exports=i.p+"img/eto_remake_ushi.d4e84512.png"},"76ee":function(e,t,i){e.exports=i.p+"img/niku_yakiniku.3bf07da3.png"},ae90:function(e,t,i){},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("7a23"),r=Object(n["t"])("data-v-0ed5514b"),c=r((function(e,t,i,r,c,o){return Object(n["i"])(),Object(n["d"])("div",{id:"container",style:e.app.container.style},[(Object(n["i"])(),Object(n["d"])(Object(n["o"])(e.app.scene)))],4)})),o=(i("d81d"),i("d3b7"),i("3835")),l=i("2909"),a=(i("96cf"),i("1da1")),u=function(){return Math.floor(1e5*Math.random())},s=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=6,t=6,i=60;return{field:{tiles:Object(l["a"])(Array(e)).map((function(e,i){return Object(l["a"])(Array(t)).map((function(e,t){return{tileType:"PIPE",tileId:u(),position:[i,t],up:{isOpen:!1},down:{isOpen:!1},left:{isOpen:!1},right:{isOpen:!1}}}))})),rows:e,columns:t,cowPos:[-1,-1],cowSaucePos:[-1,-1],vegSaucePos:[-1,-1]},picture:void 0,canOperate:!0,stage:0,score:0,countdown:i,isOver:!1}},p=function(e){var t=e.field,i=t.rows,n=t.columns;e.stage+=1;for(var r=function(e){var t=function(){return Math.random()<.5};return{tileType:"PIPE",tileId:u(),position:e,up:{isOpen:t()},down:{isOpen:t()},left:{isOpen:t()},right:{isOpen:t()}}},c=0;c<i;c++)for(var o=0;o<n;o++)e.field.tiles[c][o]=r([c,o]);var l,a,s=function(e,t){return{tileType:"OBJECT",tileId:u(),position:e,objectType:t}},d=function(){return Math.floor(Math.random()*i)},p=function(){return Math.floor(Math.random()*n)};while(f=[p(),d()],l=f[0],a=f[1],"PIPE"!==e.field.tiles[l][a].tileType)var f;e.field.tiles[l][a]=s([l,a],"COW"),e.field.cowPos=[l,a];while(v=[p(),d()],l=v[0],a=v[1],"PIPE"!==e.field.tiles[l][a].tileType)var v;e.field.tiles[l][a]=s([l,a],"COW_SAUCE"),e.field.cowSaucePos=[l,a];while(O=[p(),d()],l=O[0],a=O[1],"PIPE"!==e.field.tiles[l][a].tileType)var O;e.field.tiles[l][a]=s([l,a],"VEG_SAUCE"),e.field.vegSaucePos=[l,a]},f=function(e){e.isOver=!1,e.canOperate=!0;var t=setInterval((function(){e.countdown--,e.countdown<=0&&(e.countdown=0,clearInterval(t),e.isOver=!0,e.canOperate=!1)}),1e3);p(e)},v=function(e){var t=e.field,i=t.rows,n=t.columns,r=function(){return Object(l["a"])(Array(i)).map((function(){return Object(l["a"])(Array(n)).map((function(){return{prev:void 0,lastMove:void 0}}))}))},c=function t(i,n,r,c,l,a){var u,s,d=Object(o["a"])(i,2),p=d[0],f=d[1],v=null===(u=e.field.tiles)||void 0===u||null===(s=u[p])||void 0===s?void 0:s[f];if(void 0===v)return!1;if(void 0!==n[p][f].prev)return!1;if(a&&"OBJECT"===v.tileType&&"COW"!==v.objectType)return!1;n[p][f]={prev:c,lastMove:l};var O=[p-1,f],b=[p+1,f],j=[p,f-1],y=[p,f+1];if("PIPE"===v.tileType){var g=function(){var t,i,n=O[0],r=O[1],c=null===(t=e.field.tiles)||void 0===t||null===(i=t[n])||void 0===i?void 0:i[r];return v.up.isOpen&&void 0!==c&&("PIPE"!==c.tileType||c.down.isOpen)},h=function(){var t,i,n=b[0],r=b[1],c=null===(t=e.field.tiles)||void 0===t||null===(i=t[n])||void 0===i?void 0:i[r];return v.down.isOpen&&void 0!==c&&("PIPE"!==c.tileType||c.up.isOpen)},w=function(){var t,i,n=j[0],r=j[1],c=null===(t=e.field.tiles)||void 0===t||null===(i=t[n])||void 0===i?void 0:i[r];return v.left.isOpen&&void 0!==c&&("PIPE"!==c.tileType||c.right.isOpen)},P=function(){var t,i,n=y[0],r=y[1],c=null===(t=e.field.tiles)||void 0===t||null===(i=t[n])||void 0===i?void 0:i[r];return v.right.isOpen&&void 0!==c&&("PIPE"!==c.tileType||c.left.isOpen)};return!(!g()||!t(O,n,r,i,"UP",!0))||(!(!h()||!t(b,n,r,i,"DOWN",!0))||(!(!w()||!t(j,n,r,i,"LEFT",!0))||!(!P()||!t(y,n,r,i,"RIGHT",!0))))}if(v.objectType===r&&void 0===c){var m=function(){var t,i,n=O[0],r=O[1],c=null===(t=e.field.tiles)||void 0===t||null===(i=t[n])||void 0===i?void 0:i[r];return void 0!==c&&("PIPE"!==c.tileType||c.down.isOpen)},T=function(){var t,i,n=b[0],r=b[1],c=null===(t=e.field.tiles)||void 0===t||null===(i=t[n])||void 0===i?void 0:i[r];return void 0!==c&&("PIPE"!==c.tileType||c.up.isOpen)},E=function(){var t,i,n=j[0],r=j[1],c=null===(t=e.field.tiles)||void 0===t||null===(i=t[n])||void 0===i?void 0:i[r];return void 0!==c&&("PIPE"!==c.tileType||c.right.isOpen)},S=function(){var t,i,n=y[0],r=y[1],c=null===(t=e.field.tiles)||void 0===t||null===(i=t[n])||void 0===i?void 0:i[r];return void 0!==c&&("PIPE"!==c.tileType||c.left.isOpen)};return!(!m()||!t(O,n,r,i,"UP",!0))||(!(!T()||!t(b,n,r,i,"DOWN",!0))||(!(!E()||!t(j,n,r,i,"LEFT",!0))||!(!S()||!t(y,n,r,i,"RIGHT",!0))))}return"COW"===v.objectType},a=function t(i,n,r){var c=Object(o["a"])(i,2),l=c[0],a=c[1],u=n[l][a].prev;if(void 0!==u){var s=n[l][a].lastMove,d=e.field.tiles[l][a];if("UP"===s){"PIPE"==d.tileType&&(d.down.flow=r);var p=e.field.tiles[u[0]][u[1]];"PIPE"===p.tileType&&(p.up.flow=r)}if("DOWN"===s){"PIPE"==d.tileType&&(d.up.flow=r);var f=e.field.tiles[u[0]][u[1]];"PIPE"===f.tileType&&(f.down.flow=r)}if("RIGHT"===s){"PIPE"==d.tileType&&(d.left.flow=r);var v=e.field.tiles[u[0]][u[1]];"PIPE"===v.tileType&&(v.right.flow=r)}if("LEFT"===s){"PIPE"==d.tileType&&(d.right.flow=r);var O=e.field.tiles[u[0]][u[1]];"PIPE"===O.tileType&&(O.left.flow=r)}t(u,n,r)}},u=r(),s={reachsCowSauce:!1,reachsVegSauce:!1};return s.reachsVegSauce=c(e.field.vegSaucePos,u,"VEG_SAUCE"),s.reachsVegSauce?(console.log("veg",u),a(e.field.cowPos,u,"VEG_SAUCE"),s):(u=r(),s.reachsCowSauce=c(e.field.cowSaucePos,u,"COW_SAUCE"),s.reachsCowSauce&&(console.log("cow",u),a(e.field.cowPos,u,"COW_SAUCE")),s)},O=function(e,t,i){var n=Object(o["a"])(t,2),r=n[0],c=n[1],l=Object(o["a"])(i,2),u=l[0],d=l[1],f=e.field.tiles,O=r===u&&1===Math.abs(c-d)||c===d&&1===Math.abs(r-u),b=function(e){return void 0!==e&&"PIPE"===e.tileType};if(O&&b(f[r][c])&&b(f[u][d])){var j=[f[u][d],f[r][c]];f[r][c]=j[0],f[u][d]=j[1];var y=[f[u][d].position,f[r][c].position];f[r][c].position=y[0],f[u][d].position=y[1];var g=v(e),h=g.reachsCowSauce,w=g.reachsVegSauce;console.log("check",{reachsCowSauce:h,reachsVegSauce:w});var P=w?"VEG":h?"COW":void 0;void 0!==P&&Promise.resolve().then(Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.canOperate=!1,t.next=3,s(500);case 3:return e.picture=P,t.next=6,s(500);case 6:e.canOperate=!0,e.picture=void 0,e.countdown+=3,"VEG"==P&&(e.countdown=0),p(e);case 11:case"end":return t.stop()}}),t)}))))}},b=function(e,t){var i=Object(o["a"])(t,2),n=i[0],r=i[1];e.canOperate&&"PIPE"===e.field.tiles[n][r].tileType&&(e.field.selected?(O(e,t,e.field.selected),e.field.selected=void 0):e.field.selected=t)},j=Object(n["l"])({scene:"GameScene",game:d(),container:{height:0,width:0,style:{height:"0",width:"0"}}}),y=function(){var e=function(){var e=window.innerHeight,t=window.innerWidth,i=j.container,n=3;9*e/16<t?(i.height=e-n,i.width=9*e/16-n):(i.height=16*t/9-n,i.width=t-n),i.style.height="".concat(i.height,"px"),i.style.width="".concat(i.width,"px")};window.addEventListener("resize",e),e()};function g(e,t,i,r,c,o){return Object(n["i"])(),Object(n["d"])("div")}var h=Object(n["g"])({name:"StartScene",props:{}});h.render=g;var w=h,P=i("76ee"),m=i.n(P),T=i("2541"),E=i.n(T),S=Object(n["t"])("data-v-61eca67a");Object(n["k"])("data-v-61eca67a");var I={class:"indicator"},C={class:"score"},k={class:"timer"},_={key:0,class:"picture",src:m.a},x={key:1,class:"picture",src:E.a},M={key:1,class:"stage"},A=Object(n["f"])("div",{class:"desc"}," 牛に焼肉のタレをかけて焼肉を作ろう！ドレッシングをかけるとサラダになってしまうから要注意だ！ ",-1),W=Object(n["f"])("div",null," おわり！！！！！ ",-1);Object(n["j"])();var G=S((function(e,t,i,r,c,o){var l=Object(n["n"])("Tile");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["f"])("div",I,[Object(n["f"])("div",C,"スコア: "+Object(n["p"])(e.app.game.score),1),Object(n["f"])("div",k,"残り時間: "+Object(n["p"])(e.app.game.countdown),1)]),e.app.game.picture?(Object(n["i"])(),Object(n["d"])("div",{key:0,class:"picture-container",style:{width:e.app.container.style.width,height:e.app.container.style.width}},["COW"===e.app.game.picture?(Object(n["i"])(),Object(n["d"])("img",_)):Object(n["e"])("",!0),"VEG"===e.app.game.picture?(Object(n["i"])(),Object(n["d"])("img",x)):Object(n["e"])("",!0)],4)):(Object(n["i"])(),Object(n["d"])("div",M,[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["m"])(e.field.tiles,(function(e){return Object(n["i"])(),Object(n["d"])(n["a"],null,[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["m"])(e,(function(e){return Object(n["i"])(),Object(n["d"])(l,{key:e.tileId,class:"tile",tile:e},null,8,["tile"])})),128))],64)})),256))])),A,Object(n["s"])(Object(n["f"])("div",null,[W,Object(n["f"])("button",{class:"btn",onClick:t[1]||(t[1]=function(){return e.tweet&&e.tweet.apply(e,arguments)})}," つぶやく "),Object(n["f"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return e.retry&&e.retry.apply(e,arguments)})}," もっかい ")],512),[[n["q"],e.app.game.isOver]])],64)})),R=i("6bbe"),U=i.n(R),V=i("2cee"),L=i.n(V),N=i("15c7"),H=i.n(N),J=Object(n["t"])("data-v-a13f4976");Object(n["k"])("data-v-a13f4976");var D={key:0,class:"tile image-tile",src:U.a},F={key:1,class:"tile image-tile",src:L.a},q={key:2,class:"tile image-tile",src:H.a};Object(n["j"])();var B=J((function(e,t,i,r,c,o){return Object(n["i"])(),Object(n["d"])("div",{style:e.style},["PIPE"===e.tile.tileType?(Object(n["i"])(),Object(n["d"])("div",{key:0,onClick:t[1]||(t[1]=function(){return e.selectTile&&e.selectTile.apply(e,arguments)}),class:["tile pipe-tile",{selected:e.isSelectedTile}]},[Object(n["f"])("div",{class:"pipe-tile-piece",style:e.upperLeftPieceStyle},null,4),Object(n["f"])("div",{class:"pipe-tile-piece",style:e.upperRightPieceStyle},null,4),Object(n["f"])("div",{class:"pipe-tile-piece",style:e.lowerLeftPieceStyle},null,4),Object(n["f"])("div",{class:"pipe-tile-piece",style:e.lowerRightPieceStyle},null,4)],2)):(Object(n["i"])(),Object(n["d"])(n["a"],{key:1},["COW"===e.tile.objectType?(Object(n["i"])(),Object(n["d"])("img",D)):Object(n["e"])("",!0),"COW_SAUCE"===e.tile.objectType?(Object(n["i"])(),Object(n["d"])("img",F)):Object(n["e"])("",!0),"VEG_SAUCE"===e.tile.objectType?(Object(n["i"])(),Object(n["d"])("img",q)):Object(n["e"])("",!0)],64))],4)})),z=i("5530"),K=function(e){var t=function(e){var t;if(e.isOpen){var i={COW_SAUCE:"orange",VEG_SAUCE:"green",NONE:"gray"}[null!==(t=e.flow)&&void 0!==t?t:"NONE"];return"solid ".concat(i," 2px")}},i=e.tile;return{upperLeftPieceStyle:Object(n["b"])((function(){return{"border-right":t(i.up),"border-bottom":t(i.left)}})),upperRightPieceStyle:Object(n["b"])((function(){return{"border-left":t(i.up),"border-bottom":t(i.right)}})),lowerLeftPieceStyle:Object(n["b"])((function(){return{"border-top":t(i.left),"border-right":t(i.down)}})),lowerRightPieceStyle:Object(n["b"])((function(){return{"border-top":t(i.right),"border-left":t(i.down)}})),isSelectedTile:Object(n["b"])((function(){var t,i=null!==(t=j.game.field.selected)&&void 0!==t?t:[-1,-1],n=Object(o["a"])(i,2),r=n[0],c=n[1],l=Object(o["a"])(e.tile.position,2),a=l[0],u=l[1];return r===a&&c==u})),selectTile:function(){return b(j.game,e.tile.position)}}},Q=Object(n["g"])({name:"Tile",props:{tile:{type:Object,required:!0}},setup:function(e){return Object(z["a"])({style:Object(n["b"])((function(){var e=j.container.width/j.game.field.columns;return{width:"".concat(e,"px"),height:"".concat(e,"px")}}))},K(e))}});i("370e");Q.render=B,Q.__scopeId="data-v-a13f4976";var X=Q,Y=Object(n["g"])({name:"GameScene",components:{Tile:X},setup:function(){return f(j.game),{app:j,field:Object(n["b"])((function(){return j.game.field})),tweet:function(){var e="わたしはおせちのために ".concat(j.game.score," 匹の丑を焼肉にしました");window.open().location.href="https://twitter.com/intent/tweet?text=".concat(encodeURI(e))},retry:function(){return f(j.game)}}}});i("2427");Y.render=G,Y.__scopeId="data-v-61eca67a";var Z=Y;function $(e,t,i,r,c,o){return Object(n["i"])(),Object(n["d"])("div")}var ee=Object(n["g"])({name:"ResultScene",props:{}});ee.render=$;var te=ee,ie=Object(n["g"])({name:"App",components:{StartScene:w,GameScene:Z,ResultScene:te},setup:function(){return y(),{app:j}}});i("57da");ie.render=c,ie.__scopeId="data-v-0ed5514b";var ne=ie,re=i("5502"),ce=Object(re["a"])({state:{},mutations:{},actions:{},modules:{}});Object(n["c"])(ne).use(ce).mount("#app")},f233:function(e,t,i){}});
//# sourceMappingURL=app.6124ff2c.js.map